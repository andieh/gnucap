spice
* p type inv amp w/bti
.options ttstepgrow=0
.options TEMP=25
.options numdgt=10

.load rcd_sym.so

.param pulse_iv=0
.param pulse_rise=1n

.param voff=0.4
.model my_rcdmodel rcd_exp
.parameter s=.11

.model bti_ptm_approx bti_sum (
+ parms = (
+(1.28936788433 ,  -0.0*s,                  13.433303380408852, 43.576925888911987*s, 1.4509831704140836),
+(0.0425895446518, -0.0*s,                  4.1230027350333067, 44.168622555330224*s, 0.35639368027120355),
+(0.00986204739979,-0.046730726782108274*s, 6.9322844619511379, 34.467824008855281*s, 19.76034507753667),
+(323556.834838,   -0.74091304338940822*s,  7.9999074744048002, 50.0*s, 25.0),
+(65734.7534834,   -0.0*s,                  7.6851098109742111, 33.944029750879885*s, 20.802215970322095),
+(25.5541996901,   -46.321386556453803*s,  16.844440862184946, 11.976323270474861*s, 23.296371309229073)
+)
+rcd_model_name=my_rcdmodel weight=1.23)

.model cmosp pmos(
+level=8
+bti_model=bti_ptm_approx
+ ALPHA0 = 6.0E-08 BETA0 = 12
+ H0 = 0
+ vth0 = -1.42
+)

.param vdd=5
.param vstress={vdd*.6}

MP2 nctrl2 ng2 ndd2 ndd2 cmosp l=3.5e-5 w=4.5e-6
R2 nctrl2 0 4k
Vin2 nin2 0 sin amplitude=1 offset=4
rin2 nin2 ng2 10k
r2 ndd2 ndd 1k

MP1 nctrl1 ng1 ndd1 ndd1 cmosp l=3.5e-5 w=4.5e-6
R1 nctrl1 0 4k
Vin1 nin1 0 sin amplitude=1 offset=3
rin1 nin1 ng1 10k
r1 ndd1 ndd 1k

vdd ndd 0 vdd

roff1 ndd 0 1k

.print tw
+ v(ndd1)
+ v(ndd2)
+ v(nctrl1)
+ v(nctrl2)
+ dvth(mp1.bti)
+ dvth(mp2.bti)
+ hidden(0)

.param TTend=5K
.store tt dvth(mp*.bti)


.tw 1u .1m {TTend} * 20 new trace=a > dbg.out
.measure bti11 at(probe="dvth(mp1.bti)")
.measure bti12 at(probe="dvth(mp2.bti)")
.stat notime
* disable corr. more steps required.
.options ttcorr=false
.tw 1u .1m {TTend} * 20 new trace=a >> dbg.out
.measure bti21 at(probe="dvth(mp1.bti)")
.measure bti22 at(probe="dvth(mp2.bti)")
.stat notime
* force fewer steps. error grows.
.options ttcorr=false
.options ttsteporder=0
.tw 1u .1m {TTend} * 20 new trace=a >> dbg.out
.measure bti31 at(probe="dvth(mp1.bti)")
.measure bti32 at(probe="dvth(mp2.bti)")
.stat notime
* equidist spl
.options ttcorr=false
.options ttsteporder=0
.tw 1u .1m {TTend} 100 new trace=a >> dbg.out
.measure bti41 at(probe="dvth(mp1.bti)")
.measure bti42 at(probe="dvth(mp2.bti)")
.stat notime
.end
