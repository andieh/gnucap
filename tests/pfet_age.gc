spice
* p type inv amp w/bti
.options TEMP=25

.load rcd_sym.so
*.options numdgt=7

.param pulse_iv=0
.param pulse_rise=1n

.param voff=0.4
.model my_rcdmodel rcd_exp

.model singleton bti_sum (
+ parms = (
+  (65734.764403498935, -1, 7.6851098109742111, 33.944029750879885, 20.802215970322095)
+ )
+ rcd_model_name=my_rcdmodel
+ weight=1
+)

.model cmosp pmos(
+level=8
+bti_model=singleton
+)

.param vdd=3
V1 nin ndd sin ( delay=-0.025m amplitude={vdd/3} frequency=1e4 offset={-vdd/2})
R2 nin ng 10k
MP1 nout ng ndd ndd cmosp l=3.5e-5 w=4.5e-6
*MP1 ndd ng nout ndd cmosp l=1.5e-5 w=4.5e-6
R1 0 nout 9k
VDD ndd 0 vdd

.verilog
measm mym(nout,0);
spice

*sanitycheck
.print tran dvth(MP1) dvth(MP1.bti)
.print tw dvth(MP1) dvth(MP1.bti) control(0)
.echo noage
.ttr 0 .300001m .1m .05m .1m new noage
.echo age (default?)
.ttr 0 .300001m .1m .05m .1m new

.print tran v(n*) bti(MP1) P(MP1.BTI) tau(MP1.BTI.*) s(MP1.BTI.*) v(MP1.BTI.*) v(MP1.BTI) stress(MP1.BTI)

.print tw dvth(MP1.BTI) dvth(MP1) iter(0) control(0)
+ max(mym)
+ max(mym)
+ tau(MP1.BTI.rcd*)
+ uhi(MP1.BTI.rcd*)
+ ueff(MP1.BTI.rcd*)
+ ulo(MP1.BTI.rcd*)
* + P(MP1.BTI)


.store tran v(nout)
.ttr 0 5 1u .1m * 1.5 new tran > debug_pfet_age_tr.out

.param pulse_iv=0.4
.print tran clear

.echo tt continue
.store tran v(nout)
.tw 10 tran noage

.echo tran age
.tw 0 new
.tw 1u .1m .2m new tran age > debug_pfet_age_trage.out

.echo tran noage
.tw 0 new
.tw 1u .1m .2m new tran noage > debug_pfet_age_trage.out

.status notime
.list

.end

