load public models-uf.so
spice
* p type inv amp w/bti
.options TEMP=25

.load rcd_sym.so
*.options numdgt=7

.param pulse_iv=0
.param pulse_rise=1n

.param voff=0.4
.model my_rcdmodel rcd_exp

.list

.model bti_ptm_approx bti_sum (
+ parms = (
+(1.28936788433 ,-0.0, 13.433303380408852, 43.576925888911987, 1.4509831704140836),
+(0.0425895446518 ,-0.0, 4.1230027350333067, 44.168622555330224, 0.35639368027120355),
+(0.00986204739979 ,-0.046730726782108274, 6.9322844619511379, 34.467824008855281, 19.76034507753667),
+(323556.834838 ,-0.74091304338940822, 7.9999074744048002, 50.0, 25.0),
+(65734.7534834 ,-0.0, 7.6851098109742111, 33.944029750879885, 20.802215970322095),
+(25.5541996901 ,-46.321386556453803, 16.844440862184946, 11.976323270474861, 23.296371309229073)
+)
+rcd_model_name=my_rcdmodel weight=.1)

.model cmosp pmos(
+level=8
+bti_model=bti_ptm_approx
+)

.param vdd=1
V1 nin ndd sin ( delay=-0.025m amplitude={vdd/3} frequency=1e4 offset={-vdd/2})
R2 nin ng 10k
MP1 nout ng ndd ndd cmosp l=3.5e-5 w=4.5e-6
*MP1 ndd ng nout ndd cmosp l=1.5e-5 w=4.5e-6
R1 0 nout 9k
VDD ndd 0 vdd

.print tran
+ v(ng)
+ tau(MP1.BTI.RCD*)
.tran 0 .1m .1m age trace=a
.print tran clear

.print tw dvth(MP1.BTI)
+ ueff(MP1.BTI.rcd*)
* + P(MP1.BTI)

.store tw dvth(MP1.BTI)
.tw 1u .1m 50 * 1.6 new
.measure bti at(probe="dvth(MP1.BTI)"))

.store tw dvth(MP1.BTI)
.tw 1u .1m 50 * 1.2 new
.measure bti at(probe="dvth(MP1.BTI)"))

.status notime
.end
